---
emoji: 🥽
title: Virtual DOM
date: "2022-01-11"
category: React
preview: "'리액트를 다루는 기술'이라는 책을 읽고 배운 것을 바탕으로 작성되었다. 리액트는 오직 뷰(View)만 신경쓰는 자바스크립트 라이브러리이다. 데이터가 변할 때마다 뷰에 어떤 변화를 줄지 고민하는 것이 아니라 기존 뷰를 날려 버리고 처음부터 새로 렌더링한다. 컴포넌트: 렌더링할 React 엘리먼트를 반환하는 재사용 가능한 선언체이다. 컴포넌트를 기반으로 UI를 구성한다. 컴포넌트의 생김새와 작동 방식을 정의한다. 컴포넌트는 트리 형태로 구성된다. 상위 컴포넌트에서 하위 컴포넌트로의 단방향의 데이터 흐름을 갖고 있다. 렌더링: 사용자 화면에 뷰를 보여주는 것 (초기 렌더링 / 리렌더링) render 함수는 컴포넌트가 어떻게 생겼는지 정의한다. html 형식의 문자열을 반환하지 않고 뷰가 어떻게 생겼고 어떻게 작동하는지에 대한 정보를 지닌 객체를 반환한다."
---

> "리액트를 다루는 기술"이라는 책을 읽고 배운 것을 바탕으로 작성되었다.

# React.js란?

- 리액트는 **오직 뷰(View)만 신경쓰는 자바스크립트 라이브러리**이다.
- 데이터가 변할 때마다 뷰에 어떤 변화를 줄지 고민하는 것이 아니라 기존 뷰를 날려 버리고 처음부터 새로 렌더링한다.
- **컴포넌트**: 렌더링할 React 엘리먼트를 반환하는 재사용 가능한 선언체이다. 컴포넌트를 기반으로 UI를 구성한다.
  - 컴포넌트의 생김새와 작동 방식을 정의한다.
  - 컴포넌트는 트리 형태로 구성된다.
  - 상위 컴포넌트에서 하위 컴포넌트로의 단방향의 데이터 흐름을 갖고 있다.
- **렌더링**: 사용자 화면에 뷰를 보여주는 것 (초기 렌더링 / 리렌더링)
- **render 함수**
  - 컴포넌트가 어떻게 생겼는지 정의한다.
  - html 형식의 문자열을 반환하지 않고 뷰가 어떻게 생겼고 어떻게 작동하는지에 대한 정보를 지닌 객체를 반환한다.
  - 컴포넌트 내부에 또 다른 컴포넌트가 있을 시 render 함수를 실행하면 그 내부에 있는 컴포넌트들도 재귀적으로 렌더링한다.
  - 최상위 컴포넌트의 렌더링 작업이 끝나면 반환된 정보들을 사용하여 HTML 마크업을 만들고, 이를 바탕으로 `DOM` 트리를 만든다. (초기 렌더링)

<br/>

# 😎 Virtual DOM

> 참고: [DOM이란?](https://www.eunnbi.dev/posts/js-browser#dom%EC%9D%B4%EB%9E%80?)

DOM은 과연 느릴까?

- DOM 자체는 빠르다. DOM 자체를 읽고 쓸 때의 성능은 빠르다.
- 하지만 웹 브라우저 단에서 DOM에 변화(업데이트)가 일어나면 브라우저의 렌더링 엔진이 다시 레이아웃을 구성하고, 페이지를 리페인트한다. (시간 소모가 크다)
  - 참고 : [브라우저 렌더링 과정](https://www.eunnbi.dev/posts/web-browser#%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%97%94%EC%A7%84)
- **DOM을 조작할 때마다 엔진이 웹페이지를 새로 그리기 때문에 업데이트가 너무 잦으면 성능이 저하될 수 있다.**

해결법 : **DOM을 최소한으로 조작**한다! **Virtual DOM을 이용해 최소한의 DOM 처리로 View를 업데이트할 수 있다.**

- Virtual DOM은 실제 DOM을 추상화한 자바스크립트 객체이다. (실제 DOM보다 가벼운 사본)
- 컴포넌트는 데이터가 업데이트되었을 때, 새로운 데이터를 가지고 `render()`를 호출한다.
- 이때 반환된 결과를 곧바로 실제 DOM에 반영하지 않고, 먼저 Virtual DOM을 업데이트한다.
- 이전 Virtual DOM과 현재 Virtual DOM을 비교하고, 바뀐 부분만 실제 DOM에 적용한다.

> 💡 지속적으로 데이터가 변화하는 대규모 애플리케이션 효율적으로 구축하기 위해 React 탄생<br/>
> 💡 React와 Virtual DOM이 제공할 수 있는 것은 **View 업데이트 처리 간결성**이다.

관련 영상: [React and the Virtual DOM](https://www.youtube.com/watch?v=BYbgopx44vo&t=1s)
