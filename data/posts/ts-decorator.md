---
emoji: ğŸš¦
title: ë°ì½”ë ˆì´í„°
date: "2022-12-28"
category: Typescript
preview: "í´ë˜ìŠ¤, ì†ì„±, ë©”ì„œë“œ, ì ‘ê·¼ì œì–´ì, ë§¤ê°œë³€ìˆ˜ ë“±ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜ì´ë‹¤. ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ë°ì½”ë ˆì´í„° í•¨ìˆ˜ ì´ë¦„ ì•ì— @ë¥¼ ë¶™ì¸ë‹¤. í´ë˜ìŠ¤, ì†ì„±, ë©”ì„œë“œ, ì ‘ê·¼ì œì–´ì, ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ê°€ ì „ë‹¬ë°›ëŠ” ì¸ìê°€ ë‹¤ë¥´ë‹¤. ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ tsconfig.json íŒŒì¼ì˜ compilerOptionsì—ì„œ targetì„ es6ìœ¼ë¡œ ì„¤ì •í•˜ê³ , experimentalDecoratorsì„ trueë¡œ ì„¤ì •í•œë‹¤. í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„° í´ë˜ìŠ¤ ì„ ì–¸ì„ ê´€ì°°í•˜ê±°ë‚˜ ì†ì„± ë° ë©”ì„œë“œë¥¼ ì¶”ê°€ ë° ìˆ˜ì •í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í´ë˜ìŠ¤ê°€ ìœ ì¼í•œ ì¸ìë¡œ ì „ë‹¬ëœë‹¤. í´ë˜ìŠ¤ ì¬ì •ì˜ í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ì—ì„œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•˜ì—¬ ì†ì„± ë° ë©”ì„œë“œë¥¼ ì¶”ê°€ ë° ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ì—ì„œ ì¬ì •ì˜í•œ ì†ì„± ë° ë©”ì„œë“œê°€ ì›ë˜ í´ë˜ìŠ¤ì˜ ì†ì„± ë° ë©”ì„œë“œë³´ë‹¤ ìš°ì„ ëœë‹¤."
---

## ë°ì½”ë ˆì´í„°ë€?

- í´ë˜ìŠ¤, ì†ì„±, ë©”ì„œë“œ, ì ‘ê·¼ì œì–´ì, ë§¤ê°œë³€ìˆ˜ ë“±ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜ì´ë‹¤.
- ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ë°ì½”ë ˆì´í„° í•¨ìˆ˜ ì´ë¦„ ì•ì— `@`ë¥¼ ë¶™ì¸ë‹¤.
- í´ë˜ìŠ¤, ì†ì„±, ë©”ì„œë“œ, ì ‘ê·¼ì œì–´ì, ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ê°€ ì „ë‹¬ë°›ëŠ” ì¸ìê°€ ë‹¤ë¥´ë‹¤.
- ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `tsconfig.json` íŒŒì¼ì˜ `compilerOptions`ì—ì„œ `target`ì„ `es6`ìœ¼ë¡œ ì„¤ì •í•˜ê³ , `experimentalDecorators`ì„ `true`ë¡œ ì„¤ì •í•œë‹¤.

<br/>

## í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„°

- í´ë˜ìŠ¤ ì„ ì–¸ì„ ê´€ì°°í•˜ê±°ë‚˜ ì†ì„± ë° ë©”ì„œë“œë¥¼ ì¶”ê°€ ë° ìˆ˜ì •í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- í´ë˜ìŠ¤ê°€ ìœ ì¼í•œ ì¸ìë¡œ ì „ë‹¬ëœë‹¤.

```ts
function Component(target: Function) {
  target.prototype.type = "component";
  target.prototype.version = "0.1.0";
}

@Component
class Person {
  name = "Max";
  constructor() {
    console.log("Creating person object...");
  }
}

const person = new Person(); // Creating person object...
console.log((person as any).type); // component (íƒ€ì… ë‹¨ì–¸ í•„ìš”í•¨!)
console.log((person as any).version); // 0.0.1
```

### í´ë˜ìŠ¤ ì¬ì •ì˜

- í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ì—ì„œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•˜ì—¬ ì†ì„± ë° ë©”ì„œë“œë¥¼ ì¶”ê°€ ë° ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
- í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ì—ì„œ ì¬ì •ì˜í•œ ì†ì„± ë° ë©”ì„œë“œê°€ ì›ë˜ í´ë˜ìŠ¤ì˜ ì†ì„± ë° ë©”ì„œë“œë³´ë‹¤ ìš°ì„ ëœë‹¤.

```ts
function Component<T extends { new (...args: any[]): {} }>(target: T) {
  // ì¬ì •ì˜
  return class extends target {
    // ì†ì„±
    type: string = "component";
    version: string = "0.1.0";

    constructor(...args: any[]) {
      super(...args);
    }
    // ë©”ì„œë“œ
    info() {
      console.log(this.name, this.type, this.version);
    }
  };
}

@Component
class Person {
  name = "Max";
  constructor() {
    console.log("Creating person object...");
  }

  info() {
    console.log(this.name);
  }
}

const person = new Person(); // Creating person object...
console.log((person as any).type); // component
(person as any).info(); // Max component 0.1.0
```

<br/>

## ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬

- ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë¥¼ ê°ì‹¸ëŠ” ë˜í¼ í•¨ìˆ˜, ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
- ì‚¬ìš©ìë¡œë¶€í„° ì¸ìë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆë‹¤.

```ts
// ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬
function Logger(logString: string) {
  return function (constructor: Function) {
    console.log(logString);
    console.log(constructor);
  };
}

@Logger("LOGGING - PERSON")
class Person {
  name = "Max";

  constructor() {
    console.log("Creating person object...");
  }
}
```

<br/>

## ë©€í‹° ë°ì½”ë ˆì´í„°

- í•˜ë‚˜ì˜ ëŒ€ìƒì— ëŒ€í•´ ì—¬ëŸ¬ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.
- ë°ì½”ë ˆì´í„°ëŠ” ë‹¤ìŒ ìˆœì„œë¡œ ì²˜ë¦¬ëœë‹¤.
  - ê° ë°ì½”ë ˆì´í„° í‘œí˜„ì‹ì€ ìœ„ì—ì„œ ì•„ë˜ ë°©í–¥ìœ¼ë¡œ í‰ê°€ëœë‹¤.
  - ì•„ë˜ì—ì„œ ìœ„ë¡œ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

> **ë°ì½”ë ˆì´í„°ëŠ” í´ë˜ìŠ¤ë¥¼ ì„ ì–¸ ë° ì •ì˜í•  ë•Œ ì‹¤í–‰ëœë‹¤.**

```ts
function Logger(logString: string) {
  console.log("LOGGER FACTORY");
  return function (target: Function) {
    console.log(logString);
    console.log(target);
  };
}

function WithTemplate(template: string, hookId: string, name: string) {
  console.log("TEMPLATE FACTORY");
  return function (target: any) {
    console.log("Rendering template");
    const hookEl = document.getElementById(hookId);
    const p = new target(name);
    if (hookEl) {
      hookEl.innerHTML = template;
      hookEl.querySelector("h1")!.textContent = p.name;
    }
  };
}

@Logger("LOGGING - PERSON")
@WithTemplate("<h1>My Person Object</h1>", "app", "Max")
class Person {
  constructor(public name: string) {
    console.log("Creating person object...");
  }

  info() {
    console.log(this.name);
  }
}

/*
LOGGER FACTORY
TEMPLAGE FACTORY
Rendering template
LOGGING - PERSON
*/
```

<br/>

## ë©”ì„œë“œ ë°ì½”ë ˆì´í„°

- ë©”ì„œë“œ ì„ ì–¸ ì•ì— ì‚¬ìš©ë˜ê³ , ë©”ì„œë“œ ì„ ì–¸ì„ í™•ì¸, ìˆ˜ì •, êµì²´í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.
- ì´ 3ê°œì˜ ì¸ìë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤.
  - `target`: í´ë˜ìŠ¤(ìƒì„±ì í•¨ìˆ˜)ì˜ í”„ë¡œí† íƒ€ì… ê°ì²´
  - `name`: ë©”ì„œë“œ ì´ë¦„
  - `descriptor`: ë©”ì„œë“œì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ (configurable, writable ë“±)

```ts
function Write(able: boolean = true) {
  return function (target: any, name: string, desc: PropertyDescriptor) {
    desc.writable = able;
  };
}

class Product {
  constructor(
    public title: string,
    private price: number
  ) {}

  @Write(false)
  getPriceWithTax(tax: number) {
    return this.price * (1 + tax);
  }
}

const product = new Product("Chocolate", 1000);
product.getPriceWithTax = function (_: number) {
  console.log(this);
  return 0;
}; // Uncaught TypeError: Cannot assign to read only property 'getPriceWithTax' of object '#<Product>'
```

<br/>

## ì ‘ê·¼ ì œì–´ì ë°ì½”ë ˆì´í„°

- ì ‘ê·¼ ì œì–´ì ì„ ì–¸ ì•ì— ì‚¬ìš©ë˜ê³ , ì ‘ê·¼ ì œì–´ìì— ëŒ€í•œ ì„ ì–¸ í™•ì¸, ìˆ˜ì •, êµì²´í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.
- ì´ 3ê°œì˜ ì¸ìë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤.
  - `target`: í´ë˜ìŠ¤(ìƒì„±ì í•¨ìˆ˜)ì˜ í”„ë¡œí† íƒ€ì… ê°ì²´
  - `name`: ì ‘ê·¼ ì œì–´ì ì´ë¦„
  - `descriptor`: ì ‘ê·¼ ì œì–´ìì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ (configurable, enumerable, get, set)

```ts
function Configurable(remove: boolean) {
  return function (target: any, name: string, desc: PropertyDescriptor) {
    desc.configurable = remove;
  };
}

class Rectangle {
  public color?: string = "#000";

  constructor(
    private _width: number,
    private _height: number
  ) {}

  @Configurable(false)
  get width() {
    return this._width;
  }

  @Configurable(false)
  get height() {
    return this._height;
  }
}

const rect = new Rectangle(400, 210);
delete rect.color;
delete rect.width; // Compile Error: The operand of a 'delete' operator cannot be a read-only property.
```

<br/>

## ì†ì„± ë°ì½”ë ˆì´í„°

- ì†ì„± ì„ ì–¸ ì•ì— ì‚¬ìš©ë˜ê³ , ì†ì„± ì„ ì–¸ í™•ì¸, ìˆ˜ì •, êµì²´í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.
- ì´ 2ê°œì˜ ì¸ìë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤.
  - `target`: í´ë˜ìŠ¤(ìƒì„±ì í•¨ìˆ˜)ì˜ í”„ë¡œí† íƒ€ì… ê°ì²´
  - `name`: ì†ì„± ì´ë¦„

```ts
// ì†ì„±ì„ ì½ê±°ë‚˜ ì“¸ ë•Œ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ” ë°ì½”ë ˆì´í„°
function LogProp(target: any, name: string) {
  let value = target[name];

  const getter = function () {
    console.log(`GET: ${name} => ${value}`);
    return value;
  };

  const setter = function (newVal: any) {
    value = newVal;
    console.log(`SET: ${name} => ${value}`);
  };

  if (delete target[name]) {
    Object.defineProperty(target, name, {
      get: getter,
      set: setter,
      enumerable: true,
      configurable: true
    });
  }
}

class Button {
  @LogProp
  type: string = "button";

  @LogProp
  version: string = "0.1.0";
}
const btn = new Button(); //SET: type => button // SET: version => 0.0.2
console.log(btn.type); // GET: type => button // button
btn.type = "ë²„íŠ¼"; // SET: type => ë²„íŠ¼
```

> ì°¸ê³ : [Object.defineProperty()](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)

<br/>

## ë§¤ê°œë³€ìˆ˜ ë°ì½”ë ˆì´í„°

- í´ë˜ìŠ¤ì˜ ìƒì„±ì í•¨ìˆ˜ í˜¹ì€ ë©”ì„œë“œì˜ ë©”ê°œë³€ìˆ˜ì— ì£¼ë¡œ ì‚¬ìš©ëœë‹¤.
- ì´ 3ê°œì˜ ì¸ìë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤.
  - `target`: ìƒì„±ì í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì— ì‚¬ìš©í–ˆë‹¤ë©´ í´ë˜ìŠ¤ê°€ ì „ë‹¬ë˜ê³ , ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ì— ì‚¬ìš©í–ˆë‹¤ë©´ í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì… ê°ì²´ê°€ ì „ë‹¬ëœë‹¤.
  - `name`: ë©”ì„œë“œ ì´ë¦„ (ë§Œì•½ ìƒì„±ì í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¼ë©´ `undefined`ê°€ ì „ë‹¬ëœë‹¤)
  - `index`: ë§¤ê°œë³€ìˆ˜ ìˆœì„œ (0ë¶€í„° ì‹œì‘)

```ts
function Log(target: any, name: string, index: number) {
  console.log(
    target.name === undefined ? target.constructor.name : target.name
  );
  console.log(`
    ë§¤ê°œë³€ìˆ˜ ìˆœì„œ: ${index}, 
    ë©¤ë²„ ì´ë¦„: ${name === undefined ? "constructor" : name}
  `);
}

class Product {
  constructor(
    @Log public title: string,
    @Log private price: number
  ) {}

  getPriceWithTax(@Log tax: number) {
    return this.price * (1 + tax);
  }
}
```

```
Product
ë§¤ê°œë³€ìˆ˜ ìˆœì„œ: 0,
ë©¤ë²„ ì´ë¦„: getPriceWithTax

Product
ë§¤ê°œë³€ìˆ˜ ìˆœì„œ: 1,
ë©¤ë²„ ì´ë¦„: constructor

Product
ë§¤ê°œë³€ìˆ˜ ìˆœì„œ: 0,
ë©¤ë²„ ì´ë¦„: constructor

ë§¤ê°œë³€ìˆ˜ê°€ ì—­ìˆœìœ¼ë¡œ ì¶œë ¥ë¨.
```

<br/>

## autobind ë°ì½”ë ˆì´í„° ë§Œë“¤ê¸°

```ts
class Printer {
  message = "This works!";

  showMessage() {
    console.log(this.message);
  }
}

const p = new Printer();
const button = document.querySelector("button");
button?.addEventListener("click", p.showMessage);
```

- ìœ„ ì˜ˆì‹œì˜ ê²°ê³¼ë¡œ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ `undefined`ê°€ ì¶œë ¥ëœë‹¤.
- ê·¸ ì´ìœ ëŠ” ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œ `addEventListener` ë©”ì„œë“œì˜ ì¸ìˆ˜ë¡œ ì „ë‹¬ëœ ì½œë°±í•¨ìˆ˜ ë‚´ë¶€ì˜ `this`ëŠ” ì´ë°´íŠ¸ ëŒ€ìƒìœ¼ë¡œ ë°”ì¸ë”©ëœë‹¤.
- showMessage ë©”ì„œë“œë¥¼ ì½œë°±í•¨ìˆ˜ë¡œ ì „ë‹¬í–ˆê¸° ë•Œë¬¸ì— ë©”ì„œë“œ ë‚´ë¶€ì˜ `this`ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì•„ë‹Œ buttonì„ ì°¸ì¡°í•œë‹¤.

**í•´ê²°**

1. `bind` ë©”ì„œë“œ ì´ìš©

```ts
button?.addEventListener("click", p.showMessage.bind(p));
```

2. í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ ë©”ì„œë“œ ë‚´ë¶€ì˜ `this`ê°€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ë„ë¡ ëª…ì‹œí•˜ê¸°

- ì´ ë°©ë²•ì€ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```ts
function Autobind(target: any, name: string, descriptor: PropertyDescriptor) {
  const originialMethod = target[name];
  const adjDescriptor: PropertyDescriptor = {
    configurable: true,
    enumerable: false,
    get() {
      const boundFn = originialMethod.bind(this); // this = instance
      return boundFn;
    }
  };
  return adjDescriptor;
}

class Printer {
  message = "This works!";

  @Autobind
  showMessage() {
    console.log(this.message);
  }
}

const p = new Printer();
const button = document.querySelector("button");
button?.addEventListener("click", p.showMessage);
```

- ë°ì½”ë ˆì´í„° í•¨ìˆ˜ì—ì„œ ë°˜í™˜ëœ ê°’ì„ ë©”ì„œë“œì˜ ìƒˆë¡œìš´ property descriptorìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.
- ì´ì œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ `get`ì´ ì‹¤í–‰ë˜ê³  bind ë©”ì„œë“œë¥¼ ì´ìš©í•´ ëª…ì‹œì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ `this`ë¡œ ë°”ì¸ë”©í•œ ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ë°˜í™˜í•œë‹¤.

<br/>

> ì°¸ê³ : [typestack/class-validator](https://github.com/typestack/class-validator)
